---
description: ButceYonet proje yapısı ve genel kurallar
alwaysApply: true
---

# ButceYonet API – Proje Genel Bakış

## Çözüm Yapısı

- **ButceYonet.Application**: Ana uygulama katmanı (Domain, Application/Features, Infrastructure). .NET 10, MediatR, DotBoil paketleri, EF Core, AutoMapper, FluentValidation.
- **ButceYonet.Api**: REST API; controller’lar `BaseController`’dan türer, tüm endpoint’ler `[Authorize]`, yanıtlar `BaseResponse` / `Response()` ile döner.
- **ButceYonet.Auth**: Kimlik doğrulama (MVC, Views, wwwroot).
- **ButceYonet.Consumers**: MassTransit domain event consumer’ları; her event için `[Consumer("event-name")]` ve `BaseConsumer<TEvent>` kullanılır.

## İsimlendirme ve Konvansiyonlar

- Namespace: `ButceYonet.{Proje}.{Klasör}` (örn. `ButceYonet.Application.Application.Features.Transactions.GetTransactions`).
- Entity: PascalCase, tekil (örn. `Transaction`, `NotebookUser`). Domain event: `{Entity}{Aksiyon}DomainEvent` (örn. `TransactionCreatedDomainEvent`).
- API route: `api/[controller]` veya `api/notebooks/{notebookId}/...` gibi nested route’lar kullanılır.
- Yeni özellik eklerken mevcut Feature/Controller/Consumer yapısına ve isimlendirmesine uy.

## Teknoloji Özeti

- **DotBoil**: Entities (BaseEntity, BaseResponse, PaginationFilter, PaginatedModel), EFCore (IRepository, DbContext), Caching, Localization, Parameter, Validator, MassTransit, Swagger, vb.
- **MediatR**: Query/Command ve Handler’lar.
- **FluentValidation**: Her Command/Query için `*Validator` sınıfı (AbstractValidator<T>).
- **AutoMapper**: Shared/Profiles ve Shared/Dtos; Entity → Dto mapping.
- **EF Core**: EntityTypeConfiguration ile mapping; `ButceYonetDbContext`, `*EntityTypeConfiguration`.

## Genel Kurallar

- API dokümantasyonu: Controller action’larda `<summary>`, `<param>`, `<returns>` ve uygun `[ProducesResponseType]` kullan.
- Hata ve iş kuralı: Domain exception’ları kullan (`NotFoundException`, `BusinessRuleException`, `AlreadyExistsException` vb.).
- Dependency injection: Handler ve Consumer’larda constructor injection; Consumer’da scope için `IServiceProvider.CreateScope()` ve `InitializeDependencies` pattern’i kullanılabilir.
